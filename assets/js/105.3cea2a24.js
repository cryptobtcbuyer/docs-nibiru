(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{526:function(e,t,n){"use strict";n.r(t);var a=n(0),i=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"node-daemon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-daemon"}},[e._v("#")]),e._v(" Node Daemon")]),e._v(" "),t("p",{attrs:{synopsis:""}},[e._v("The main endpoint of an SDK application is the "),t("strong",[e._v("daemon client")]),e._v(", otherwise known as the "),t("strong",[e._v("full-node")]),e._v(" client. The full-node runs the state-machine, starting from a genesis file. It connects to peers running the same client in order to receive and relay transactions, block proposals and signatures.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",[e._v("Running a node is different from running a Validator. In order to run a Validator, you must create and sync a node, and then upgrade it by staking.")])]),e._v(" "),t("h2",{attrs:{id:"what-it-means-to-start-a-full-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-it-means-to-start-a-full-node"}},[e._v("#")]),e._v(" What it Means to Start a Full-Node")]),e._v(" "),t("p",[e._v("For the Nibiru Chain application, the "),t("code",[e._v("nibid start")]),e._v(" command starts a full-node.")]),e._v(" "),t("p",[e._v("The full-node consists of two main parts:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("State-machine")]),e._v(": The application, defined with the Cosmos-SDK.")]),e._v(" "),t("li",[t("strong",[e._v("Consensus Engine")]),e._v(": Engine combining the networking and consensus layers that connects to the application via a socket protocol satisfying the "),t("a",{attrs:{href:"https://docs.tendermint.com/v0.34/introduction/what-is-tendermint.html#abci-overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("Application BlockChain Interface (ABCI)"),t("OutboundLink")],1),e._v(". The consensus engine is responsible for sharing blocks and transactions between nodes and establishing an immutable order of transactions (the blockchain).")])]),e._v(" "),t("p",[e._v("Nibiru uses "),t("strong",[e._v("Tendermint Core")]),e._v(" as its consensus engine, which means that the start command is implemented to boot up a Tendermint node. The Tendermint node can be created with app because the latter satisfies the "),t("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/v0.34.0/abci/types/application.go#L7-L32",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("abci.Application")]),e._v(" interface"),t("OutboundLink")],1),e._v(" (given that "),t("code",[e._v("app")]),e._v(" extends the Cosmos-SDK "),t("a",{attrs:{href:"https://docs.cosmos.network/v0.45/core/baseapp.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("baseapp")]),t("OutboundLink")],1),e._v(").")]),e._v(" "),t("h2",{attrs:{id:"syncing-a-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syncing-a-node"}},[e._v("#")]),e._v(" Syncing a Node")]),e._v(" "),t("p",[e._v("As part of the this process, Tendermint makes sure that the height of the application (i.e. number of blocks since genesis) is equal to the height of the Tendermint node. The difference between these two heights should always be negative or null.")]),e._v(" "),t("p",[e._v("If the difference between the block height of the TM node and application is strictly negative, Tendermint will replay blocks until the two block heights are equal (see "),t("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/v0.34.21/node/node.go",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("NewNode")]),t("OutboundLink")],1),e._v(").")]),e._v(" "),t("p",[t("strong",[e._v("Genesis Behavior")]),e._v(": Finally, if the height of the application is 0, the Tendermint node will call InitChain on the application to initialize the state from the genesis file.")]),e._v(" "),t("p",[e._v('Once the Tendermint node is instanciated and in sync with the application, the node can be "started".')]),e._v(" "),t("p",[e._v("Upon starting, the node will bootstrap its RPC and P2P server and start dialing peers. During handshake with its peers, if the node realizes they are ahead, it will query all the blocks sequentially in order to catch up. Then, it will wait for new block proposals and block signatures from validators in order to make progress.")])])}),[],!1,null,null,null);t.default=i.exports}}]);